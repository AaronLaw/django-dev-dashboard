<!DOCTYPE html>
<html>
<head>
  <meta charset=utf-8 />
  <title>Django Development Dashboard</title>
  <link rel="stylesheet" href="{{ STATIC_URL }}dashboard.css" type="text/css" media="screen" title="no title" charset="utf-8">
<script type="text/javascript" src="{{ STATIC_URL }}raphael-min.js" charset="utf-8"></script>
<script type="text/javascript" src="{{ STATIC_URL }}g.raphael-min.js" charset="utf-8"></script>
<script type="text/javascript" src="{{ STATIC_URL }}g.line-min.js" charset="utf-8"></script>
<script type="text/javascript" src="{{ STATIC_URL }}jquery.min.js" charset="utf-8"></script>
<script type="text/javascript" charset="utf-8">
    var sparklinesData =
    [
        {% for report in data %}
            {% if not forloop.first %},{% endif %}
            {
                'values': {{report.thirty_days_values}},
                'timestamps':{{report.thirty_days_timestamps}}
            }
        {% endfor %}
    ];
    $(document).ready(function () {
        var i ;
        var line;

        var nLines = sparklinesData.length;
        for (i=0;i<nLines;i++)
        {
            var lineData = sparklinesData[i].values;
            var lineStamps = sparklinesData[i].timestamps;
            var x= [];
            var r = Raphael("spark"+(i+1));

            var line = r.g.linechart(0, 30, 95, 90, lineStamps, [lineData]);
            line.attr({stroke:'yellow'});;
        }
    });
</script>
</head>
<body>
  <h1>Django Development Dashboard</h1>
  {% for report in data %}
    <div class="metric">
      <h2><a href="{{ report.latest.metric.link }}">{{ report.latest.metric.name }}</a></h2>
      <p class="value" ><a href="{{ report.latest.metric.link }}">{{ report.latest.measurement }}</a></p>
      <div class="sparkline" id="spark{{forloop.counter}}"
           title="from {{report.first_stamp|date:'SHORT_DATETIME_FORMAT'}} to {{report.last_stamp|date:'SHORT_DATETIME_FORMAT'}}">

      </div>
    </div>
  {% endfor %}
  <p class="updated">Updated {{ data.0.latest.timestamp|timesince }} ago. Hover over sparklines to see their time range.</p>
  <a href="http://github.com/jacobian/django-dev-dashboard"><img style="position: absolute; top: 0; right: 0; border: 0;" src="https://d3nwyuy0nl342s.cloudfront.net/img/30f550e0d38ceb6ef5b81500c64d970b7fb0f028/687474703a2f2f73332e616d617a6f6e6177732e636f6d2f6769746875622f726962626f6e732f666f726b6d655f72696768745f6f72616e67655f6666373630302e706e67" alt="Fork me on GitHub"></a>
</body>
</html>
